<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏</title>
    <link rel="stylesheet" href="../static/css/styles_main.css">
    <link rel="stylesheet" href="../static/css/rec.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
<div class="empty"></div>
<header>
    <div class="header_t_icone">
        <img src="../static/images/logo_white.svg" style="width: 50%;">
    </div>
    <div class="header_other">
        <form class="search-container">
            <button class="search-container-but"><img class="search-container-img" src="../static/images/loupe-search.svg"></button>
            <input type="text" placeholder="–ü–æ–∏—Å–∫">
        </form>

        <div class="notification-bell">
            <button class="bell-btn"><img src="../static/images/bell-search.svg" alt="–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è"></button>
        </div>
        <a class="user">
            <img src="../static/images/dicapro.jpg" alt="User Avatar" class="user_avatar_img" />
            <span id="responsive-text" class="avatar_name">Dicaprio</span>
        </a>
    </div>
</header>
<main>
    <div class="sidebar">
        <ul class="site_bar_menu_elements">
            <li>
                <button class="site_bar_menu_buttons" data-url="http://localhost:63342/T-finance-main/templates/home_page.html">
                    <img src="../static/images/home-icon.svg" alt="–ì–ª–∞–≤–Ω–∞—è" class="icon">–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
                </button>
            </li>
            <li>
                <button class="site_bar_menu_buttons" data-url="http://localhost:63342/T-finance-main/templates/expenses.html">
                    <img src="../static/images/rashod.svg" alt="–†–∞—Å—Ö–æ–¥—ã" class="icon">–†–∞—Å—Ö–æ–¥—ã
                </button>
            </li>
            <li>
                <button class="site_bar_menu_buttons" data-url="http://localhost:63342/T-finance-main/templates/income.html">
                    <img src="../static/images/dohod.svg" alt="–î–æ—Ö–æ–¥—ã" class="icon">–î–æ—Ö–æ–¥—ã
                </button>
            </li>
            <li>
                <button class="site_bar_menu_buttons" data-url="http://localhost:63342/T-finance-main/templates/rec.html">
                    <img src="../static/images/recomends.svg" alt="–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏" class="icon">–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
                </button>
            </li>
        </ul>
    </div>

    <div class="content">
        <div class="rec_container">
            <p class="helper">–ü–æ–º–æ—â–Ω–∏–∫</p>
            <div class="dialog" id="dialog">
                <div id="messages">
                    <!-- –°–æ–æ–±—â–µ–Ω–∏—è –±—É–¥—É—Ç –∑–¥–µ—Å—å -->
                </div>
                <div class="input-container">
                    <input type="text" id="messageInput" class="message-input" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ...">
                    <button class="send-btn" id="send-btn">
                        <img class="send-btn-img" src="../static/images/Send.svg" alt="Send">
                    </button>
                </div>
            </div>
        </div>
    </div>
</main>

<script>
    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è
    function sendMessage() {
        var messageInput = document.getElementById('messageInput');
        var dialog = document.getElementById('messages');

        // –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ–±—ã –Ω–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –ø—É—Å—Ç–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
        if (messageInput.value.trim() === "") {
            return;
        }

        // –°–æ–∑–¥–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        var messageDiv = document.createElement('p');
        messageDiv.classList.add('message', 'sent');
        messageDiv.innerHTML = messageInput.value + '<span class="user-emoji">üßë</span>'; // –°–∏–ª—É—ç—Ç —á–µ–ª–æ–≤–µ–∫–∞

        // –î–æ–±–∞–≤–ª—è–µ–º –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –¥–∏–∞–ª–æ–≥
        dialog.appendChild(messageDiv);

        // –û—á–∏—Å—Ç–∫–∞ –ø–æ–ª—è –≤–≤–æ–¥–∞
        messageInput.value = '';

        // –û—Ç–≤–µ—Ç –æ—Ç –ø–æ–º–æ—â–Ω–∏–∫–∞ (–±–µ–∑ –∑–∞–¥–µ—Ä–∂–∫–∏)
        var responseDiv = document.createElement('p');
        responseDiv.classList.add('message', 'received');
        responseDiv.innerHTML = '<span class="emoji">ü§ñ</span> –û—Ç–≤–µ—Ç –æ—Ç –ø–æ–º–æ—â–Ω–∏–∫–∞';

        // –î–æ–±–∞–≤–ª—è–µ–º –æ—Ç–≤–µ—Ç –≤ –¥–∏–∞–ª–æ–≥
        dialog.appendChild(responseDiv);

        // –ü—Ä–æ–∫—Ä—É—Ç–∫–∞ –∫ –ø–æ—Å–ª–µ–¥–Ω–µ–º—É —Å–æ–æ–±—â–µ–Ω–∏—é
        dialog.scrollTop = dialog.scrollHeight;
    }

    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–∞–∂–∞—Ç–∏—è –Ω–∞ –∫–Ω–æ–ø–∫—É –æ—Ç–ø—Ä–∞–≤–∫–∏
    const button = document.getElementById('send-btn');
    button.addEventListener('click', sendMessage);

    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–∞–∂–∞—Ç–∏—è –∫–ª–∞–≤–∏—à–∏ Enter
    const messageInput = document.getElementById('messageInput');
    messageInput.addEventListener('keydown', function(event) {
        if (event.key === "Enter") {
            event.preventDefault();  // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –¥–µ–π—Å—Ç–≤–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ—Ç–ø—Ä–∞–≤–∫—É —Ñ–æ—Ä–º—ã)
            sendMessage();  // –í—ã–∑—ã–≤–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è
        }
    });

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –º–µ–∂–¥—É —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏ —Å –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º –∞–∫—Ç–∏–≤–Ω–æ–π –∫–Ω–æ–ø–∫–∏
    function goToPage(url, button) {
        // –£–¥–∞–ª—è–µ–º –∫–ª–∞—Å—Å 'active' —Å –¥—Ä—É–≥–∏—Ö –∫–Ω–æ–ø–æ–∫
        const buttons = document.querySelectorAll('.site_bar_menu_buttons');
        buttons.forEach(btn => btn.classList.remove('active'));

        // –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å 'active' –Ω–∞ —Ç–µ–∫—É—â—É—é –∫–Ω–æ–ø–∫—É
        button.classList.add('active');

        // –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É
        window.location.href = url; // –ü–µ—Ä–µ—Ö–æ–¥ —á–µ—Ä–µ–∑ –ø–æ–ª–Ω—ã–π –ø—É—Ç—å
    }

    // –î–ª—è –≤—ã–¥–µ–ª–µ–Ω–∏—è –∞–∫—Ç–∏–≤–Ω–æ–π –∫–Ω–æ–ø–∫–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
    document.addEventListener("DOMContentLoaded", () => {
        const currentUrl = window.location.pathname; // –¢–µ–∫—É—â–∏–π URL
        const buttons = document.querySelectorAll('.site_bar_menu_buttons');

        buttons.forEach(button => {
            const link = button.getAttribute('data-url'); // –ò—Å–ø–æ–ª—å–∑—É–µ–º data-url –≤–º–µ—Å—Ç–æ onclick
            if (currentUrl === link) {
                button.classList.add('active'); // –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å 'active' –Ω–∞ —Ç–µ–∫—É—â—É—é –∫–Ω–æ–ø–∫—É
            }

            // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –∫–∞–∂–¥–æ–π –∫–Ω–æ–ø–∫–∏
            button.addEventListener('click', () => {
                goToPage(link, button);
            });
        });
    });
</script>
</body>
</html>
